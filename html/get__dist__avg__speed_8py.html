<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RT1 assignment 2: scripts/get_dist_avg_speed.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT1 assignment 2
   </div>
   <div id="projectbrief">Ros package containing the nodes and the custom messages and services requested for the 2nd assignment of Research track 1 in the A.A.2023/2024</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_53e6fa9553ac22a5646d2a2b2d7b97a1.html">scripts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">get_dist_avg_speed.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>server node providing the current distance from the target and the average speed of the simulated robot  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aff3c1a72d7ff6221f7cb1768c5943989"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__dist__avg__speed_8py.html#aff3c1a72d7ff6221f7cb1768c5943989">get_dist_avg_speed.callback</a> (msg)</td></tr>
<tr class="memdesc:aff3c1a72d7ff6221f7cb1768c5943989"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback function for /act_pos_vel topic's messages  <a href="get__dist__avg__speed_8py.html#aff3c1a72d7ff6221f7cb1768c5943989">More...</a><br /></td></tr>
<tr class="separator:aff3c1a72d7ff6221f7cb1768c5943989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb01cccf7b05ffae79152ce96419008f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__dist__avg__speed_8py.html#afb01cccf7b05ffae79152ce96419008f">get_dist_avg_speed.requestresponse</a> (req)</td></tr>
<tr class="memdesc:afb01cccf7b05ffae79152ce96419008f"><td class="mdescLeft">&#160;</td><td class="mdescRight">service request callback function  <a href="get__dist__avg__speed_8py.html#afb01cccf7b05ffae79152ce96419008f">More...</a><br /></td></tr>
<tr class="separator:afb01cccf7b05ffae79152ce96419008f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82aab9b700814571295c51347be24a3d"><td class="memItemLeft" align="right" valign="top"><a id="a82aab9b700814571295c51347be24a3d"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.main</b> ()</td></tr>
<tr class="separator:a82aab9b700814571295c51347be24a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2e3ad91e1c9ef157df35e86c02ae7e80"><td class="memItemLeft" align="right" valign="top"><a id="a2e3ad91e1c9ef157df35e86c02ae7e80"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.w</b> = rospy.get_param('avg_win')</td></tr>
<tr class="separator:a2e3ad91e1c9ef157df35e86c02ae7e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbfffc9602a5d297f4c2dce093307fd0"><td class="memItemLeft" align="right" valign="top"><a id="acbfffc9602a5d297f4c2dce093307fd0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.curr_x</b> = 0</td></tr>
<tr class="separator:acbfffc9602a5d297f4c2dce093307fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f27ed4281ba16489bac3f17f2b43451"><td class="memItemLeft" align="right" valign="top"><a id="a0f27ed4281ba16489bac3f17f2b43451"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.curr_y</b> = 0</td></tr>
<tr class="separator:a0f27ed4281ba16489bac3f17f2b43451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff5ecff706258f222acf3784a615cbc"><td class="memItemLeft" align="right" valign="top"><a id="a1ff5ecff706258f222acf3784a615cbc"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.curr_vx</b> = []</td></tr>
<tr class="separator:a1ff5ecff706258f222acf3784a615cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3922c4ff04f7d28dd07abc59afba0901"><td class="memItemLeft" align="right" valign="top"><a id="a3922c4ff04f7d28dd07abc59afba0901"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>get_dist_avg_speed.curr_vy</b> = []</td></tr>
<tr class="separator:a3922c4ff04f7d28dd07abc59afba0901"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>server node providing the current distance from the target and the average speed of the simulated robot </p>
<dl class="section author"><dt>Author</dt><dd>Torre Nicol√≤</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">avg_win</td><td>integer value representing the averaging window's width (the number of speed element on which the average is computed)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">des_pos_x</td><td>x-coordinate of the goal position</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">des_pos_y</td><td>y-coordinate of the goal position</td></tr>
  </table>
  </dd>
</dl>
<p>Subscribes to: <br  />
 /act_pos_vel</p>
<p>Service: <br  />
 /Dist_avg_speed</p>
<p>description: This node is a server node subscribing to the /act_pos_vel topic (from which it receives the current position and velocity of the simulated robot). When a request is received this node provides the requester with the current distance fromthe target and the average velocity. the server can be called from the /Dist_avg_speed service </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aff3c1a72d7ff6221f7cb1768c5943989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3c1a72d7ff6221f7cb1768c5943989">&#9670;&nbsp;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def get_dist_avg_speed.callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>callback function for /act_pos_vel topic's messages </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>message received from the topic return nothing</td></tr>
  </table>
  </dd>
</dl>
<p>This function is a callback for the /act_pos_vel topic and receives the custom message Pos_vel. When called it stores the current x and y positions in two global variables and adds the current velocity's components to two lists of size w, removing the first values inserted in the list if the list contains more than avg_win element </p>

</div>
</div>
<a id="afb01cccf7b05ffae79152ce96419008f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb01cccf7b05ffae79152ce96419008f">&#9670;&nbsp;</a></span>requestresponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def get_dist_avg_speed.requestresponse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>service request callback function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receives</td><td>the custom service message Distance_AvgSpeed, empty on the request side </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns a response to the service request containing the x-y components of the distance from the target and of the average velocity</dd></dl>
<p>this function is called whenever a service request is received. When called the distance from the target and the average speed are computed (both split in their x and y components) and sent to the requester through the response to the request </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
